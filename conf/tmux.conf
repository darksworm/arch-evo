# arch-evo tmux.conf — ported from maac-nix/home.nix

# TPM plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin '27medkamal/tmux-session-wizard'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'momo-lab/tmux-toggle-scratch'
set -g @plugin 'CrispyConductor/tmux-copy-toolkit'
set -g @plugin 'itsdevcoffee/tmux-claude-indicators'

# General settings
set -g default-command /usr/bin/zsh
set -g base-index 1
set -g mouse on
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Pane navigation with Alt
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Window navigation with Alt+Shift
bind -n M-H previous-window
bind -n M-L next-window

# Reload config
bind r source-file ~/.config/tmux/tmux.conf \; display-message "Config reloaded!"

# Scratch terminal popup (unbind default s)
unbind -T prefix s
bind s if-shell -F '#{==:#{session_name},scratch}' {
  detach-client
} {
  display-popup -E -w "80%" -h "80%" "tmux new-session -A -s scratch -c '#{pane_current_path}'"
}

# Copy toolkit — use wl-copy for Wayland clipboard
set -g @copytk-copy-command 'wl-copy'
set -g @copytk-no-default-keys 'false'

# Status bar
set -g status on
set -g status-interval 1
set -g status-position bottom
set -g status-bg '#1b1b1b'
set -g status-fg '#c0c0c0'
set -g status-justify centre

# Left: session name
set -g status-left-length 40
set -g status-left '#[fg=#ffb86c,bold]  #S #[fg=#666666]│'

# Windows
set -g window-status-format '#[fg=#666666] #I:#W '
set -g window-status-current-format '#[fg=#c0c0c0,bold] #I:#W '
set -g window-status-separator ' '

# Right: hostname
set -g status-right-length 40
set -g status-right '#[fg=#666666]│#[fg=#8be9fd]  #h '

# Pane styling — dim inactive
setw -g window-active-style 'bg=black'
setw -g window-style 'bg=#222222'
set -g focus-events on
set-hook -g pane-focus-in 'select-pane -P "bg=black"'
set-hook -g pane-focus-out 'select-pane -P "bg=#1c1c1c,fg=#999999"'

# Borders
set -g pane-border-lines heavy
set -g pane-border-indicators arrows
set -g pane-border-style 'fg=colour239'
set -g pane-active-border-style 'fg=brightyellow'

# Initialize TPM (keep at end)
run '~/.config/tmux/plugins/tpm/tpm'
